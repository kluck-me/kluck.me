var rand=function(a,t){return Math.floor(Math.random()*(t+1-a))+a},createTextImageData=function(a,t,e){var n=document.createElement("canvas");n.width=t,n.height=e;var r=n.getContext("2d");return r.fillStyle="white",r.fillRect(0,0,t,e),r.fillStyle="black",r.font="".concat(.75*Math.min(e,t/a.length),"px serif"),r.textAlign="center",r.textBaseline="middle",r.fillText(a,t/2,e/2,t),r.getImageData(0,0,t,e)},updateCaptcha=function(a,t,e,n){for(var r=a.getContext("2d"),d=a.width,l=a.height,i=r.getImageData(0,0,d,l),o=createTextImageData(t,d,l),h=rand(75e4,12e5)/1e7,c=rand(75e4,12e5)/1e7,f=rand(75e4,12e5)/1e7,u=rand(75e4,12e5)/1e7,g=rand(0,3141592)/5e5,m=rand(0,3141592)/5e5,v=rand(0,3141592)/5e5,x=rand(0,3141592)/5e5,M=rand(330,420)/110,p=rand(330,450)/110,s=function(a,t){return 4*(a+t*d)},D=0,I=d;D<I;D++)for(var $=0,C=l;$<C;$++){var w=1,T=D+(Math.sin(D*h+g)+Math.sin($*f+m))*M,k=$+(Math.sin(D*c+v)+Math.sin($*u+x))*p,y=Math.floor(T),S=Math.floor(k);if(0<=T&&T<d&&0<=k&&k<l){var b,A,B,E,R=null!=(b=o.data[s(y,S)+2])?b:255,j=null!=(A=o.data[s(y+1,S)+2])?A:255,q=null!=(B=o.data[s(y,S+1)+2])?B:255,z=null!=(E=o.data[s(y+1,S+1)+2])?E:255,F=T-y,G=k-S,H=1-F,J=1-G;w=Math.min(255,R*H*J+j*F*J+q*H*G+z*F*G)/255}for(var K=s(D,$),L=0;L<=2;L++)i.data[K+L]=(1-w)*e[L]+w*n[L];i.data[K+3]=255}r.putImageData(i,0,0)},reload=function(){var a=$("#text").val();updateCaptcha($("#captcha")[0],a,[rand(0,100),rand(0,100),rand(0,100)],[rand(200,255),rand(200,255),rand(200,255)]),$("#length").text(a.length)};$("#reload").click(reload),$("#text").on("input",reload),reload();