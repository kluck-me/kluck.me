var novelint,vue;(novelint=new Novelint).addLint("indent",/^[^　（｟「『［〚｛〔〘〈《【〖\u00AB\u2018\u201C]/gm,function(t){return"\n"!==t.input.slice(t.index,t.index+1)}),novelint.addLint("extraIndent",/^(　+)[（｟「『［〚｛〔〘〈《【〖\u00AB\u2018\u201C]/gm),novelint.addLint("spaceAfterMark",/([！？])[^\n　！？）｠」』］〛｝〕〙〉》】〗\u00BB\u2019\u201D]/gm),novelint.addLint("markBeforeCloseQuote",/([、。])　*[）｠」』］〛｝〕〙〉》】〗\u00BB\u2019\u201D]/gm),novelint.addLint("extraSpace",/(　+)$/gm),novelint.addLint("extraSpace",/([^\n！？])(　+)/gm),novelint.addLint("extraSpace",/([！？])(　+)[）｠」』］〛｝〕〙〉》】〗\u00BB\u2019\u201D]/gm),novelint.addLint("doubleMark",/([！？]{2,})/gm,function(t){return t[1].length%2!=0}),novelint.addLint("doubleMark",/([\u2010\u2013\u2014]+|\u2026+)/gm,function(t){return t[1].length%2!=0}),novelint.addLint("singleMark",/([、。]{2,})/gm),novelint.addLint("lastChar",/([^\n　。！？\u2010\u2013\u2014\u2026）｠」』］〛｝〕〙〉》】〗\u00BB\u2019\u201D])　*$/gm),novelint.addLint("halfWidthChar",/([ -~]+)/gm),novelint.addLint("fullWidthChar",/([０-９Ａ-Ｚａ-ｚ]+)/gm),vue=new Vue({el:"#vue",data:{text:"",errorIndex:-1,errors:null,lints:{indent:[!0,"字下げ","danger:字下げが必要です",function(t){return t.replace(/^[^　（｟「『［〚｛〔〘〈《【〖\u00AB\u2018\u201C]/gm,"　$&")}],extraIndent:[!0,"過剰な字下げ","warning:字下げは不要です"],spaceAfterMark:[!0,"感嘆符・疑問符の後の空白","danger:感嘆符・疑問符の後に空白が必要です"],markBeforeCloseQuote:[!0,"閉じ括弧前の句読点","danger:閉じ括弧前に句読点は不要です"],extraSpace:[!0,"不要な空白","warning:不要な空白の可能性があります",function(t){return t.replace(/(　+)$/gm,"")}],doubleMark:[!0,"二つ組で使う約物","danger:二つ一組で使うべきです"],singleMark:[!0,"単独で使う約物","danger:単体で使うべきです"],lastChar:[!0,"文末が約物以外","warning:文末だと不自然な文字です"],halfWidthChar:[!0,"半角英数字・記号","warning:半角文字です"],fullWidthChar:[!1,"全角英数字","warning:全角文字です"]}},methods:{review:function(){var t,e,n,r;n={},r=this.lints;for(e in r)t=r[e],n[e]=t[0];this.errorIndex=-1,this.errors=novelint.review(this.text,n),this.reviewedHtml=function(t,e,n){var r,i,o,a,l,u,d,s;for(r=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},s=[],i=0,o=0,a=(d=n.indexes).length;o<a;o++)i!==(u=d[o])[2]&&(s.push(r(t.slice(i,u[2]))),i=u[2]),null===u[0]?s.push("</span>"):(l=((e[u[0]]||[])[2]||"").split(":"),s.push('<span class="alert-'+(l[0]||"danger")+'" data-toggle="tooltip" title="'+(l[1]||"エラー")+'">'));return i!==t.length&&s.push(r(t.slice(i))),s.join("")}(this.text,this.lints,this.errors)},autofix:function(){var t,e,n;n=this.lints;for(e in n)(t=n[e])[0]&&t[3]&&(this.text=t[3](this.text));this.review()},showErrorToolTip:function(){var t;this.errorIndex+=this.errors.length,this.errorIndex%=this.errors.length,(t=$('#text [data-toggle="tooltip"]')).not(":eq("+this.errorIndex+")").tooltip("hide"),t.eq(this.errorIndex).tooltip("show"),$("html,body").animate({scrollTop:t.eq(this.errorIndex).offset().top-window.innerHeight/2})},prevError:function(){this.errorIndex-=1,this.showErrorToolTip()},nextError:function(){this.errorIndex+=1,this.showErrorToolTip()}},beforeUpdate:function(){$('#text [data-toggle="tooltip"]').tooltip("destroy")},updated:function(){$('#text [data-toggle="tooltip"]').tooltip()}}),"localhost"===location.hostname&&(vue.$data.text="字下げと句読点が必要\n　空白が必要！末尾には不要。　\n　「字下げと句読点の除去。」\n　　過剰、　空白！　　です（除去せよ！　）。\n　感嘆符は偶数個！？！　句点は一個………。。\n　English。",vue.review());