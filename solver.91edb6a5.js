!function(){function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function a(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var i=function(){for(var t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];self.postMessage({type:"debug",value:a})},n=function(t){var a=Date.now();return t(),Date.now()-a},s=function(){"use strict";function a(){t(this,a),this.data=[]}return e(a,[{key:"push",value:function(t){this.data.push(t),this._up(this.data.length-1)}},{key:"pop",value:function(){if(this.data.length){var t=this.data[0];return this.data.length-1>0&&(this.data[0]=this.data[this.data.length-1],this._down(0)),this.data.pop(),t}}},{key:"_up",value:function(t){for(var a=this.data[t];t>0;){var e=t-1>>1,i=this.data[e];if(a.compareTo(i)>=0)break;this.data[t]=i,t=e}this.data[t]=a}},{key:"_down",value:function(t){for(var a=this.data[t],e=this.data.length>>1;t<e;){var i=1+(t<<1),n=i+1,s=this.data[i];if(n<this.data.length&&this.data[n].compareTo(s)<0&&(i=n,s=this.data[n]),s.compareTo(a)>=0)break;this.data[t]=s,t=i}this.data[t]=a}}]),a}(),r=function(){"use strict";function a(){t(this,a)}return e(a,[{key:"clone",value:function(){var t=new a;for(var e in this){var i=this[e];this.hasOwnProperty(e)&&(t[e]=i&&"object"==typeof i?i.concat():i)}return t}},{key:"setBoard",value:function(t){a.validateBoard(t),this.height=t.length,this.width=t[0].length,this.panel=[],this.space=-1,this.path="";for(var e=0,i=0,n=this.height;i<n;i++)for(var s=0,r=this.width;s<r;s++)0===t[i][s]?(this.panel[e]=this.height*this.width,this.space=e):this.panel[e]=t[i][s],e+=1;if(-1===this.space)throw new Error("space not found");if(!this.panel.concat().sort((function(t,a){return t-a})).every((function(t,a){return t===a+1})))throw new Error("panel is broken");this.setCalculatedDistance()}},{key:"calcManhattanDistance",value:function(t,a){var e=t%this.width,i=t/this.width|0,n=a%this.width,s=a/this.width|0;return Math.abs(e-n)+Math.abs(i-s)}},{key:"setCalculatedDistance",value:function(){this.distance=0;for(var t=0,a=this.panel.length;t<a;t++)t!==this.space&&(this.distance+=this.calcManhattanDistance(t,this.panel[t]-1));this.estimate=this.distance,this.cost=0}},{key:"moveSpace",value:function(t,a){var e=t+a*this.width;this.distance+=this.calcManhattanDistance(this.space,this.panel[e]-1),this.distance-=this.calcManhattanDistance(e,this.panel[e]-1),this.panel[this.space]=this.panel[e],this.panel[e]=this.height*this.width,this.space=e}},{key:"compareTo",value:function(t){return this.estimate-t.estimate}},{key:"toString",value:function(){return this.panel.join(",")}}],[{key:"initClass",value:function(){this.MOVES=[{x:0,y:-1,path:"u"},{x:1,y:0,path:"r"},{x:0,y:1,path:"d"},{x:-1,y:0,path:"l"}]}},{key:"validateBoard",value:function(t){if(!Array.isArray(t))throw new Error("board is broken");if(!t.length)throw new Error("board is broken");var a=t[0].length;if(!a)throw new Error("board is broken");if(!t.every((function(t){return t.length===a&&t.every((function(t){return"number"==typeof t}))})))throw new Error("board should be two-dimensional array")}}]),a}();r.initClass();var h=function(t){var a={},e=new s,i=new r;for(i.setBoard(t),i.estimate=i.distance,e.push(i);e.data.length;){if(0===(i=e.pop()).distance)return i.path;a[i]=!0;var n=i.space%i.width,h=i.space/i.width|0,o=!0,c=!1,l=void 0;try{for(var u,d=r.MOVES[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value,p=n+f.x,v=h+f.y;if(!(p<0||i.width<=p||v<0||i.height<=v)){var y=i.clone();y.moveSpace(p,v),a[y]||(y.cost+=1,y.estimate=y.distance+y.cost,y.path+=f.path,e.push(y))}}}catch(t){c=!0,l=t}finally{try{o||null==d.return||d.return()}finally{if(c)throw l}}}return null};"undefined"!=typeof self?self.addEventListener("message",(function(t){i(n((function(){try{self.postMessage({type:"result",value:h(t.data.board)})}catch(a){t=a,self.postMessage({type:"error",value:t.message})}}))),self.postMessage({type:"finish"})}),!1):(i=console.log.bind(console))(n((function(){i(h([[1,7,2,4],[6,0,14,3],[13,10,11,8],[5,9,15,12]]))})))}();