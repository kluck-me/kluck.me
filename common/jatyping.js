!function(t){var e,n,a;a=function(){var t,e,n,a,i,s,r,u,o,l,c,p;l={"ん":["ｎ"]},e={"ｋ":"かきくけこ","ｇ":"がぎぐげご","ｓ":"さしすせそ","ｚ":"ざじずぜぞ","ｔ":"たちつてと","ｄ":"だぢづでど","ｎ":"なにぬねの","ｈ":"はひふへほ","ｂ":"ばびぶべぼ","ｐ":"ぱぴぷぺぽ","ｍ":"まみむめも","ｙ":"やゆよ","ｒ":"らりるれろ","ｗ":"わを"},p=["ゃ","ゅ","ょ"];for(s in e){for(t=e[s].split(""),n=0,u=t.length;n<u;n++)r=t[n],l[r]=[s,r];if(5===t.length)for(a=t[1],i=0,o=p.length;i<o;i++)c=p[i],l[""+a+c]="じ"===a?["ｊ",""+a+c]:[s,s+"ｙ",""+a+c]}return l}(),e=function(e,n){var i,s,r,u,o,l,c,p,f,m,g,h,y,v,N,d;switch(typeof e){case"function":return e;case"number":e={wait:e};break;case"string":e={input:e};break;default:null===e?e={empty:!0,emptyWait:.05}:t.isArray(e)&&(e={input:e[0],results:e.slice(1),wait:.2})}if(e.states)return e;if(e.result&&(e.results=[e.result]),!e.results&&!e.input)return e;if(v=e.states=[],r=e.input,y=e.results,r)for(p="",d=r.match(/.[ゃゅょ]|./g),s=i=0,f=d.length;i<f;s=++i){for(N=d[s],l="っ"===N&&a[d[s+1]]?[a[d[s+1]][0]]:a[N]||[N],u=0,m=l.length;u<m;u++)o=l[u],v.push({text:""+p+o,className:n.typingClassName,wait:.1});p+=N}if(y){for(c=0,g=y.length;c<g;c++)h=y[c],v.push({text:h,className:n.convertClassName,wait:.2});v.push({text:y[y.length-1],className:n.inputClassName})}return e},n=function(e,a,i,s){var r,u,o,l,c,p;if(null==i&&(i=0),null==s&&(s=0),i<a.actions.length){if(u=a.actions[i],o=function(){n(e,a,i+1,0)},l=function(){n(e,a,i,s+1)},"function"==typeof u)return void u(o);if(u.states)return r=0===s?t(document.createElement(a.inputTagName)).insertBefore(e):e.prev(),(p=u.states[s])?(r.text(p.text||"").attr("class",p.className||""),void setTimeout(l,1e3*p.wait)):void setTimeout(o,1e3*u.wait);if(u.empty)return c=function(){var t;r=e.prev(),r.length?(t=r.text().slice(0,-1),t?r.text(t):r.remove(),setTimeout(c,1e3*u.emptyWait)):setTimeout(o,1e3*u.wait)},void c();if(u.wait)return void setTimeout(o,1e3*u.wait);throw new Error("not support: "+JSON.stringify(u))}},t.fn.jatyping=function(){var a,i,s,r,u,o,l;this.empty(),r=(null!=(u=arguments[0])?u.actions:void 0)?arguments[0]:{actions:arguments},o=t.fn.jatyping.defaults;for(s in o)l=o[s],null==r[s]&&(r[s]=l);return r.actions=function(){var t,n,a,s;for(a=r.actions,s=[],t=0,n=a.length;t<n;t++)i=a[t],s.push(e(i,r));return s}(),a=t(document.createElement(r.span)).addClass(r.caretClassName||"").text(r.caretText||"").appendTo(this),n(a,r),this},t.fn.jatyping.defaults={caretTagName:"span",caretClassName:"jatyping-caret",caretText:"|",inputTagName:"span",inputClassName:"jatyping-input",typingClassName:"jatyping-typing",convertClassName:"jatyping-convert"}}(jQuery);