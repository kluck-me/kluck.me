!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||e(t)||i(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=function(){"use strict";function e(t,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.value=n,this.left=i,this.right=a}var n,i,r;return n=e,i=[{key:"clone",value:function(){return new e(this.type,this.value,this.left,this.right)}},{key:"nuddy",value:function(){for(var t=this;"number"!==t.type&&!t.right;)t=t.left;return t}},{key:"minus",value:function(){switch(this.type){case"minus":return this.left.clone();case"add":return this.left.minus()[this.type](this.right.minus());case"mul":case"div":return this.left.minus()[this.type](this.right);default:return"pow"===this.type&&this.left.value<0&&this.right.value%2==1?this.left.minus().pow(this.right):0===this.value?this.clone():new e("minus",-this.value,this.clone())}}},{key:"hasMinus",value:function(){switch(this.type){case"minus":return!0;case"add":return this.left.hasMinus()&&this.right.hasMinus();case"mul":case"div":return this.left.hasMinus()||this.right.hasMinus();default:return!1}}},{key:"sqrtable",value:function(){return this.value>0&&1!==this.value&&isFinite(this.value)}},{key:"sqrt",value:function(){return new e("sqrt",Math.sqrt(this.value),this.clone())}},{key:"factable",value:function(){return(0===this.value||this.value>2)&&isFinite(this.value)&&Math.round(this.value)===this.value}},{key:"fact",value:function(){for(var t=1,n=1,i=this.value;n<=i&&isFinite(t);n++)t*=n;return new e("fact",t,this.clone())}},{key:"calcable",value:function(t){return isFinite(this.value)===isFinite(t.value)}},{key:"add",value:function(t){return"minus"===this.type&&this.value===-t.value?this.minus().sub(t):"minus"===t.type?this.sub(t.minus()):new e("add",this.value+t.value,this.clone(),t.clone())}},{key:"sub",value:function(t){var n,i;return n=(i=a(Array.from(e.nuddyBoth(this,t)),2))[0],t=i[1],new e("add",n.value-t.value,n.clone(),t.minus())}},{key:"mul",value:function(t){var n=this;0===n.value&&(t=t.nuddy()),0===t.value&&(n=n.nuddy());var i=t.hasMinus()?"minus":"clone";return new e("mul",this.value*t.value,n[i](),t[i]())}},{key:"div",value:function(t){var n,i;n=(i=a(Array.from(e.nuddyBoth(this,t)),2))[0];var r=(t=i[1]).hasMinus()?"minus":"clone";return new e("div",n.value/t.value,n[r](),t[r]())}},{key:"powable",value:function(t){return 0===this.value||Math.abs(Math.pow(this.value,t.value))>1e-10}},{key:"pow",value:function(t){var n=this;1===Math.abs(n.value)&&(t=t.nuddy()),0===t.value&&(n=n.nuddy());var i=n.value<0&&t.value%2==0?"minus":"clone";return new e("pow",Math.pow(n.value,t.value),n[i](),t.clone())}},{key:"toString",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(this.type){case"number":return this.value.toString();case"minus":t="-".concat(this.left.toString("-"));break;case"sqrt":t="âˆš".concat(this.left.toString("@"));break;case"fact":t="".concat(this.left.toString("@"),"!");break;case"add":var n=this.right.toString("+");if("-"!==n[0]&&(n="+".concat(n)),t="".concat(this.left.toString("+")).concat(n),""!==e&&"+"!==e)return"(".concat(t,")");break;case"mul":case"div":var i={mul:"*",div:"/"}[this.type],a=i;if(t="".concat(this.left.toString(a)).concat(i).concat(this.right.toString(a)),"/"===i&&"/"===e)return"(".concat(t,")");break;case"pow":t="".concat(this.left.toString("@"),"^").concat(this.right.toString("@"));break;default:new Error("not support: ".concat(this.type))}return"@"===e?"(".concat(t,")"):t}}],r=[{key:"nuddyBoth",value:function(t,e){for(;t.value===e.value&&t.type===e.type&&"number"!==t.type&&!t.right;)t=t.left,e=e.left;return[t,e]}}],i&&t(n.prototype,i),r&&t(n,r),e}(),u=function(t,e,n){n(e),n(e.minus()),t>0&&function(t,e){t.sqrtable()&&e(t.sqrt()),t.factable()&&e(t.fact())}(e,(function(e){u(t-1,e,n)}))},s=function(t,e,n,i){l(t,e,(function(e){l(t,n,(function(n){e.calcable(n)&&(i(e.add(n)),i(e.sub(n)),i(e.mul(n)),0!==e.value&&1!==Math.abs(n.value)&&i(e.div(n)),t>0&&0!==e.value&&1!==n.value&&e.powable(n)&&i(e.pow(n)))}))}))},l=function(t,e,n){switch(e.length){case 0:throw new Error;case 1:u(t,e[0],n);break;default:for(var i=1,a=e.length;i<a;i++)s(t,e.slice(0,i),e.slice(i,+e.length+1||void 0),(function(e){u(t,e,n)}))}},o=function(t,e,n,i){var a=!1;return l(n,e.map((function(t){return new r("number",t)})),(function(e){t===e.value&&(a=!0,i(e))})),a};self.addEventListener("message",(function(t){var e,n;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];self.postMessage({type:"debug",value:e})}((e=function(){for(var e=function(t){self.postMessage({type:"result",value:t.toString()})},n=0;n<=3&&!o(t.data.answer,t.data.numbers,n,e);n++);},n=Date.now(),e(),Date.now()-n)),self.postMessage({type:"finish"})}),!1)}();