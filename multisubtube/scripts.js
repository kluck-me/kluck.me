window.onYouTubeIframeAPIReady=function(){var t,e,a,n;t=function(t,e,a){var n,r,i,o;for(i=0,o=t.length-1;i<=o;)if(r=o+i>>1,(n=a(e,t[r]))>0)i=r+1;else{if(!(n<0))return r;o=r-1}return-i-1},n=[],a=function(){var e;return player&&player.getCurrentTime&&null!=(e=player.getCurrentTime())&&n.forEach(function(a,n){var r;(r=t(a,e,function(t,e){return t>e.end?1:t<e.start?-1:0}))<0?$("#sub_"+n).html("&nbsp;"):$("#sub_"+n).html(a[r].text)}),requestAnimationFrame(a)},e=function(){$("#form-url").submit(function(){var t,e;return e=null!=(t=/v=([^=&?]+)/.exec(this.url.value))?t[1]:void 0,$.get({url:"http://video.google.com/timedtext",data:{type:"list",v:e},dataType:"xml"}).done(function(t){$("#conf-subs").empty(),$("transcript_list>track",t).each(function(){$("<option>").text(""+$(this).attr("lang_original")).data({params:{name:$(this).attr("name"),lang:$(this).attr("lang_code"),v:e}}).val(""+$(this).attr("id")).appendTo("#conf-subs")})}),player.loadVideoById(e),!1}),$("#form-subs").submit(function(){return $("#subs").empty(),n.splice(0,n.length),$("#conf-subs option:selected").each(function(t){var e;$("<div>").attr("id","sub_"+t).appendTo("#subs"),e=n[t]=[],$.get({url:"http://video.google.com/timedtext",data:$(this).data("params"),dataType:"xml"}).done(function(t){$("transcript>text",t).each(function(){var t,a;a=parseFloat($(this).attr("start")),t=parseFloat($(this).attr("dur")),e.push({start:a,end:a+t,text:$(this).text()})})})}),!1}),a()},window.player=new YT.Player("player",{height:"360",width:"640",events:{onReady:e}})};