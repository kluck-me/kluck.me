function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequire8333;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequire8333=i),i.register("kwx1t",(function(t,n){e(t.exports,"RecursiveFunction",(function(){return a})),e(t.exports,"toTypings",(function(){return h})),e(t.exports,"moveBefore",(function(){return c})),e(t.exports,"getClassName",(function(){return f})),e(t.exports,"createElement",(function(){return u})),e(t.exports,"findCaret",(function(){return m})),e(t.exports,"findOrCreateCaret",(function(){return g})),e(t.exports,"toPattern",(function(){return y})),e(t.exports,"clear",(function(){return N})),e(t.exports,"updateByTypings",(function(){return v})),e(t.exports,"removeTextNode",(function(){return x})),e(t.exports,"removeFromNode",(function(){return T})),e(t.exports,"remove",(function(){return E})),e(t.exports,"addTextNode",(function(){return F})),e(t.exports,"updateConverts",(function(){return w})),e(t.exports,"addFromNode",(function(){return b})),e(t.exports,"addToElement",(function(){return j})),e(t.exports,"add",(function(){return $}));var o=i("igDHq");const r=()=>{},s=(e,t)=>{e>0?setTimeout(t,e):t()};class a{call(e,t=0){if(this.finished)throw new Error("finished");s(t,(()=>{try{this.started||(this.started=!0,this.onStart()),e.call(this)}catch(e){if(e===this.finish)this.callFinish();else{if(e!==this.stop)throw e;this.callStop()}}}))}callFinished(e,t=0){if(this.finished)throw new Error("finished");this.finished=!0,s(t,(()=>{e.call(this)}))}callFinish(e=0){this.callFinished(this.onFinish,e)}callStop(e=0){this.callFinished(this.onStopped,e)}next(e,...t){this.call((()=>this.onCall(...t)),e)}constructor({onStart:e=r,onCall:t=r,onFinish:n=r,onStopped:o=r}){this.finish=new Error(`finish: ${Math.random()}`),this.stop=new Error("stop"),this.started=!1,this.finished=!1,this.onStart=e,this.onCall=t,this.onFinish=n,this.onStopped=o}}o.default(a,"Stop",class{});const[p,l]=(()=>{const e={"ん":["ｎ","ん"],"っ":["ｘ","ｘｔ","っ"]},t={"ｋ":"かきくけこ","ｇ":"がぎぐげご","ｓ":"さしすせそ","ｚ":"ざじずぜぞ","ｔ":"たちつてと","ｄ":"だぢづでど","ｎ":"なにぬねの","ｈ":"はひふへほ","ｂ":"ばびぶべぼ","ｐ":"ぱぴぷぺぽ","ｍ":"まみむめも","ｙ":"やゆよ","ｒ":"らりるれろ","ｗ":"わを"},n=["ゃ","ゅ","ょ"];["ぁ","ぃ","ぅ","ぇ","ぉ"].forEach((t=>{e[t]=["ｘ",t]})),n.forEach((t=>{e[t]=["ｘ","ｘｙ",t]}));const o=[];return Object.keys(t).forEach((i=>{const r=t[i].split("");if(r.forEach((t=>{e[t]=[i,t]})),5===r.length){const t=r[1];o.push(t),n.forEach((n=>{const o=`${t}${n}`;e[o]="じ"===t?["ｊ",o]:[i,`${i}ｙ`,o]}))}})),[e,new RegExp(`[${o.join("")}][${n.join("")}]|.`,"g")]})(),d=(e,t)=>"っ"===e&&p[t]?[p[t][0]]:"ん"===e&&p[t]&&p[t][0]!==p[e][0]?[p[e][0]]:p[e]||[e],h=(e,t="")=>{const n=e.match(l)||[],o=[];let i="";for(let e=0;e<n.length;e+=1){const r=n[e],s=d(r,n[e+1]),a=i;s.forEach((e=>{o.push(`${t}${a}${e}`)})),i+=r}return o},c=(e,t)=>{if(!e.parentNode||!t.parentNode)throw new Error("Not found parentNode");for(;e.firstChild;)e.firstChild.nodeType===Node.ELEMENT_NODE?c(e.firstChild,t):t.parentNode.insertBefore(e.firstChild,t);e.parentNode.removeChild(e)},f=e=>e.filter((e=>!!e)).join(" "),u=(e,t)=>{const n=document.createElement(e);return n.className=f(t),n},m=(e,t,n)=>e.querySelector(`${t}${n.filter((e=>!!e)).map((e=>`.${e}`))}`),g=(e,t,n)=>m(e,t,n)||u(t,n),y=e=>Array.isArray(e)?(e=>!(!e||"string"!=typeof e[0]))(e)?{ime:!1,inputs:e}:{inputs:e[0],converts:e[1]}:e,S="­",C=new RegExp(S,"g"),N=e=>{let t=e.firstChild,n=!1;for(;t;)if(t.nodeType===Node.TEXT_NODE){const o=t;t=t.nextSibling,n?e.removeChild(o):o.nodeValue=S,n=!0}else t.nodeType===Node.ELEMENT_NODE&&N(t),n=!1,t=t.nextSibling},v=(e,t,{delay:n=0,speed:o=20,onStart:i,onTyping:r,onFinish:s,onStopped:p})=>{new a({onStart:i,onFinish:s,onStopped:p,onCall(n){if(t.length<=n)throw this.finish;e.nodeValue=t[n],r&&r.call(this),this.next(1e3/o,n+1)}}).next(n,0)},x=(e,{delay:t,removeDelay:n,speed:o,removeSpeed:i,...r}={})=>{const s=`${e.nodeValue||""}`,a=[];for(let e=s.length;e>=0;e-=1)a.push(s.slice(0,e)||S);v(e,a,{...r,delay:n||t||0,speed:i||o||40})},T=(e,{delay:t,removeDelay:n,speed:o,removeSpeed:i,onStart:r,onFinish:s,onStopped:p,...l}={})=>{const d=1e3/(i||o||40);new a({onStart:r,onFinish:s,onStopped:p,onCall(e){if(!e)throw this.finish;e.nodeType===Node.ELEMENT_NODE?T(e.lastChild,{...l,removeDelay:d,speed:o,removeSpeed:i,onFinish:()=>{const t=e.previousSibling;e.parentNode.removeChild(e),this.next(0,t)}}):e.nodeType===Node.TEXT_NODE?x(e,{...l,removeDelay:d,speed:o,removeSpeed:i,onFinish:()=>{const t=e.previousSibling;e.parentNode.removeChild(e),this.next(0,t)}}):this.next(0,e.previousSibling)}}).next(n||t||0,e)},E=(e,{delay:t,removeDelay:n,speed:o,removeSpeed:i,caretTagName:r="span",caretClassName:s="jatyping-caret",removeCaret:p=!1,onStart:l,onFinish:d,onStopped:h,...c}={})=>{const f=1e3/(i||o||40);let u=e.lastChild;r&&(u=e.appendChild(g(e,r,[s])).previousSibling),new a({onStart:l,onFinish(){if(p&&r){const t=m(e,r,[s]);t&&e.removeChild(t)}e.firstChild||e.appendChild(document.createTextNode(S)),d&&d.call(this)},onStopped:h,onCall(e){T(e,{...c,removeDelay:f,speed:o,removeSpeed:i,onFinish:()=>{this.callFinish()},onStopped:()=>{this.callStop()}})}}).next(n||t||0,u)},F=(e,t,{delay:n=0,speed:o=20,removeSpeed:i=40,onStart:r,onTyping:s,onFinish:p,onStopped:l,...d}={})=>{new a({onStart:r,onFinish:p,onStopped:l,onCall(n){if(t.length<=n)throw this.finish;const r=t[n],a=`${e.nodeValue||""}`.replace(C,"");if(r.startsWith(a)){const t=h(r.slice(a.length),a);v(e,t,{...d,delay:1e3/o,speed:o,onTyping:s,onFinish:()=>{this.next(1e3/o,n+1)},onStopped:()=>{this.callStop()}})}else x(e,{...d,removeDelay:1e3/i,removeSpeed:i,onTyping(){s&&s.call(this);const t=`${e.nodeValue||""}`.replace(C,"");if(r.startsWith(t))throw this.finish},onFinish:()=>{this.next(1e3/o,n)},onStopped:()=>{this.callStop()}})}}).next(n,0)},w=(e,t,{delay:n,convertDelay:o,speed:i,convertSpeed:r,inputTagName:s="span",inputTypingClassName:p="jatyping-typing",inputConvertClassName:l="jatyping-convert",onStart:d,onTyping:h,onFinish:c,onStopped:m}={})=>{const g=f([p,l]),y=f([p]),S=1e3/(r||i||10);let C;new a({onStart:d,onFinish:c,onStopped:m,onCall(){if(!C.length)throw this.finish;const[e,t,n]=C[0];n.length?t.nodeValue=n.shift():(C.shift(),C.length&&(C[0][0].className=g,e.className=y)),h&&h.call(this),this.next(S)}}).call((function(){for(;e.firstChild;)e.removeChild(e.firstChild);for(C=t.map(((t,n)=>{const o=u(s,n?[p]:[p,l]),i=o.appendChild(document.createTextNode(t[0]));return e.appendChild(o),[o,i,t.slice(1)]}));C[C.length-1]&&!C[C.length-1][2].length;)C.pop();this.next(S)}),o||n||0)},b=(e,t,{convertSpeed:n=10,inputTagName:o="span",inputClassName:i="jatyping-input",inputTypingClassName:r="jatyping-typing",onStart:s,onFinish:a,onStopped:p,...l}={})=>{const d=y(t),h=document.createTextNode(""),f=u(o,[i]);!1===d.ime?f.appendChild(h):f.appendChild(u(o,[r])).appendChild(h),e.parentNode.insertBefore(f,e),F(h,d.inputs,{...l,onStart:s,onStopped:p,onFinish(){!1!==d.ime&&d.converts?w(f,d.converts,{...l,convertSpeed:n,inputTagName:o,inputTypingClassName:r,onFinish(){c(f,f),a&&a.call(this)},onStopped:p}):(c(f,f),a&&a.call(this))}})},j=(e,t,{delay:n=0,speed:o=20,caretTagName:i="span",caretClassName:r="jatyping-caret",removeCaret:s=!1,onStart:p,onFinish:l,onStopped:d,...h}={})=>{const c=1e3/o;let f,u;u=i?e.appendChild(g(e,i,[r])):e.lastChild||(f=e.appendChild(document.createTextNode(""))),new a({onStart:p,onFinish(){if(s&&i){const t=m(e,i,[r]);t&&e.removeChild(t)}else f&&e.removeChild(f);l&&l.call(this)},onStopped:d,onCall(e){if(t.length<=e)throw this.finish;b(u,t[e],{...h,delay:c,speed:o,onFinish:()=>{this.next(c,e+1)},onStopped:()=>{this.callStop()}})}}).next(n||0,0)},D=(e,t,n)=>{if(t.hasAttribute(n)){const o=t.getAttribute(n);e.push([t,JSON.parse(o)])}else for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.ELEMENT_NODE&&D(e,o,n)},$=(e,{delay:t=0,speed:n=20,caretTagName:o="span",caretClassName:i="jatyping-caret",removeCaret:r=!1,patternsAttributeName:s="data-jatyping",onStart:p,onFinish:l,onStopped:d,...h}={})=>{const c=[];D(c,e,s),c.forEach((([e])=>{N(e)}));const f=1e3/n;new a({onStart(){if(p&&p.call(this),o){const t=m(e,o,[i]);t&&t.parentNode.removeChild(t)}},onFinish(){!r&&o&&e.appendChild(g(e,o,[i])),l&&l.call(this)},onStopped:d,onCall(e){if(c.length<=e)throw this.finish;const[t,i]=c[e];j(t,i,{...h,delay:f,speed:n,caretTagName:o,removeCaret:!0,onFinish:()=>{this.next(0,e+1)},onStopped:()=>{this.callStop()}})}}).next(t||0,0)}})),i.register("igDHq",(function(t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e(t.exports,"default",(function(){return o}))})),function(e){const{remove:t,addToElement:n,add:o}=i("kwx1t"),r=(e,t,n)=>()=>{t&&setTimeout((function(){t.call(n||this)}),e||0)},s=(t,...n)=>{const o={};for(let i=0;i<t.length;i+=1){const r=t[i];if(e.isPlainObject(r)){e.extend(o,r);break}for(let e=0;e<n.length;e+=1){const[t,i]=n[e];if("function"==typeof i&&i(r)||typeof r===i){o[t]=r,n.splice(e,1);break}}}return o};e.fn.jatyping=function(){const i=e.extend({},e.fn.jatyping.defaults,s(arguments,["patterns",Array.isArray],["complete","function"],["completeDelay","number"]));return e.fn.jatyping.assertOptions(i),this.each((function(){const s=r(i.completeDelay,i.complete,this),a=i.update?()=>{i.update.call(this)}:void 0,p={...i,onTyping:a,onFinish:s};i.patterns?n(this,i.patterns,p):e(this).find(`[${i.patternsAttribute}]`).length?o(this,{...p,patternsAttributeName:i.patternsAttribute}):t(this,p)}))},e.fn.jatyping.assertOptions=function(e){for(let t in e){const n=e[t],o=this.defaults[t];if(o&&typeof n!=typeof o)throw new Error(`invalid options.${t}: ${n}`)}},e.fn.jatyping.defaults={patternsAttribute:"data-jatyping",caretTagName:"span",caretClassName:"jatyping-caret",removeCaret:!0,inputTagName:"span",inputClassName:"jatyping-input",inputTypingClassName:"jatyping-typing",inputConvertClassName:"jatyping-convert",speed:12.5,delay:150,convertSpeed:6,convertDelay:150,removeSpeed:40,removeDelay:150}}(jQuery);