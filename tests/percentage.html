<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title>percentage</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous"></head><body><div class="container"><div class="row"><div class="col-xs-12"><p><input id="input" value="1,4,1,1"></p><dl><dt>values</dt><dd id="values"></dd><dt>twitter emulation</dt><dd id="twper"></dd><dt>proposed algorithm</dt><dd id="myper"></dd></dl></div></div></div><script src="//code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script>function n(n){return n.reduce(function(n,t){return n+t})}function t(n){return n.map(function(n){return n+"%"}).join(", ")}function r(t){for(var r=n(t),u=t.map(function(n){return Math.round(n/r*100)}),o=u.length-1;o>=0;--o)if(u[o]>0){u[o]+=100-n(u);break}return u}function u(t){var r={};t.forEach(function(n){r[n]=++r[n]||1});var u=[];for(var o in r)r[o]&&u.push([o,r[o]]);u.sort(function(n,t){return t[1]-n[1]});var e=n(t),i=0,a={};return u.forEach(function(n){var t=n[0],r=Math.round(t/e*100);a[t]=r,i+=r*n[1]}),a[u[u.length-1][0]]+=100-i,t.map(function(n){return a[n]||0})}window.pp=console.log.bind(console),$("#input").on("input",function(){var n=$(this).val().split(",").map(function(n){return parseInt(n,10)||0});$("#values").text(n.join(", ")),$("#twper").text(t(r(n))),$("#myper").text(t(u(n)))}).trigger("input");</script></body></html>