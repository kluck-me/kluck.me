<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><title>percentage</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin></head><body><div class="container my-3"><div class="row"><div class="col-12"><p><input id="input" value="1,4,1,1"></p><dl><dt>values</dt><dd id="values"></dd><dt>twitter emulation</dt><dd id="twper"></dd><dt>proposed algorithm</dt><dd id="myper"></dd></dl></div></div></div><script src="//code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin></script><script src="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin></script><script>function sum(n){return n.reduce((function(n,r){return n+r}))}function outper(n){return n.map((function(n){return n+"%"})).join(", ")}function twper(n){for(var r=sum(n),t=n.map((function(n){return Math.round(n/r*100)})),u=t.length-1;u>=0;--u)if(t[u]>0){t[u]+=100-sum(t);break}return t}function myper(n){var r={};n.forEach((function(n){r[n]=++r[n]||1}));var t=[];for(var u in r)r[u]&&t.push([u,r[u]]);t.sort((function(n,r){return r[1]-n[1]}));var e=sum(n),o=0,i={};return t.forEach((function(n){var r=n[0],t=Math.round(r/e*100);i[r]=t,o+=t*n[1]})),i[t[t.length-1][0]]+=100-o,n.map((function(n){return i[n]||0}))}$("#input").on("input",(function(){var n=$(this).val().split(",").map((function(n){return parseInt(n,10)||0}));$("#values").text(n.join(", ")),$("#twper").text(outper(twper(n))),$("#myper").text(outper(myper(n)))})).trigger("input");</script></body></html>