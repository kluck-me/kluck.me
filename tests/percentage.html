<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title>percentage</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous"></head><body><div class="container"><div class="row"><div class="col-12"><p><input id="input" value="1,4,1,1"></p><dl><dt>values</dt><dd id="values"></dd><dt>twitter emulation</dt><dd id="twper"></dd><dt>proposed algorithm</dt><dd id="myper"></dd></dl></div></div></div><script src="//code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><script src="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script><script>var n="undefined"!=typeof console&&console.log&&console.log.bind&&console.log.bind(console);function t(n){return n.reduce(function(n,t){return n+t})}function r(n){return n.map(function(n){return n+"%"}).join(", ")}function o(n){for(var r=t(n),o=n.map(function(n){return Math.round(n/r*100)}),u=o.length-1;u>=0;--u)if(o[u]>0){o[u]+=100-t(o);break}return o}function u(n){var r={};n.forEach(function(n){r[n]=++r[n]||1});var o=[];for(var u in r)r[u]&&o.push([u,r[u]]);o.sort(function(n,t){return t[1]-n[1]});var e=t(n),i=0,c={};return o.forEach(function(n){var t=n[0],r=Math.round(t/e*100);c[t]=r,i+=r*n[1]}),c[o[o.length-1][0]]+=100-i,n.map(function(n){return c[n]||0})}$("#input").on("input",function(){var n=$(this).val().split(",").map(function(n){return parseInt(n,10)||0});$("#values").text(n.join(", ")),$("#twper").text(r(o(n))),$("#myper").text(r(u(n)))}).trigger("input");</script></body></html>