<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title>percentage</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin></head><body><div class="container my-3"><div class="row"><div class="col-12"><p><input id="input" value="1,4,1,1"></p><dl><dt>values</dt><dd id="values"></dd><dt>twitter emulation</dt><dd id="twper"></dd><dt>proposed algorithm</dt><dd id="myper"></dd></dl></div></div></div><script src="//code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin></script><script src="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin></script><script>function n(n){return n.reduce(function(n,t){return n+t})}function t(n){return n.map(function(n){return n+"%"}).join(", ")}function r(t){for(var r=n(t),u=t.map(function(n){return Math.round(n/r*100)}),e=u.length-1;e>=0;--e)if(u[e]>0){u[e]+=100-n(u);break}return u}function u(t){var r={};t.forEach(function(n){r[n]=++r[n]||1});var u=[];for(var e in r)r[e]&&u.push([e,r[e]]);u.sort(function(n,t){return t[1]-n[1]});var i=n(t),o=0,a={};return u.forEach(function(n){var t=n[0],r=Math.round(t/i*100);a[t]=r,o+=r*n[1]}),a[u[u.length-1][0]]+=100-o,t.map(function(n){return a[n]||0})}$("#input").on("input",function(){var n=$(this).val().split(",").map(function(n){return parseInt(n,10)||0});$("#values").text(n.join(", ")),$("#twper").text(t(r(n))),$("#myper").text(t(u(n)))}).trigger("input");</script></body></html>